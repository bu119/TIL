# 1012. 유기농 배추

## 총 몇 마리의 지렁이가 필요한지 조사하기

#### [1012. 유기농 배추][https://www.acmicpc.net/problem/1012]

- 어떤 배추에 배추흰지렁이가 한 마리라도 살고 있으면 이 지렁이는 인접한 다른 배추로 이동할 수 있다.
- 한 배추의 상하좌우 네 방향에 다른 배추가 위치한 경우에 서로 인접해있는 것이다.
- 서로 인접해있는 배추들이 몇 군데에 퍼져있는지 조사하면 총 몇 마리의 지렁이가 필요한지 알 수 있다. 

---

## Idea

- bfs, dfs 활용
- 4방향 탐색을 이용아여 방문 체크를 통해 인접한 곳을 하나로 묶어 카운트한다.

---

## Problem

1.  `cnt` 가  1에서 더 이상 카운드되지 않음

   ```python
   if 0 <= ni < n and 0 <= nj < m and visited[ni][nj] == 0:
       q.append((ni, nj))
    visited[ni][nj] = 1
   ```

   - 방문 체크 조건에서 `arr[ni][nj]` 의 값이 존재해야한다는 조건을 빼먹음
   - `while`문이 계속 실행되어 `cnt`가 카운트되지 않음

---

## Revision

1. 4방향 탐색의 방문 조건 수정

   ```python
   if 0 <= ni < n and 0 <= nj < m and arr[ni][nj] and visited[ni][nj] == 0:
       q.append((ni, nj))
       visited[ni][nj] = 1
   ```


---

## Code

```python
def bfs(i, j):
    global visited
    q = []
    q.append((i, j))         # 배추의 좌표
    visited[i][j] = 1
    while q:
        i, j = q.pop(0)      # 인접하지 않은 배추의 좌표
        for z in range(4):   # 4방향 탐색
            ni = i + di[z]
            nj = j + dj[z]
            if 0 <= ni < n and 0 <= nj < m and arr[ni][nj] and visited[ni][nj] == 0:    # 배추가 있고 방문 안한
                q.append((ni, nj))              # 배추의 좌표를 다음 탐색을 위해 q에 넣어준다.
                visited[ni][nj] = 1             # 방문체크


t = int(input())
for tc in range(t):
    m, n, k = map(int, input().split())  # 배추밭의 가로길이 M, 세로길이 N, 배추가 심어져 있는 위치의 개수 K
    arr = [[0]*m for _ in range(n)]      # 배추밭 생성
    visited = [[0]*m for _ in range(n)]  # 방문 체크
    cnt = 0

    di = [0, 1, 0, -1]                   # 우하좌상 탐색
    dj = [1, 0, -1, 0]

    for _ in range(k):                   # 배추 생성
        x, y = map(int, input().split())
        arr[y][x] = 1

    for i in range(n):
        for j in range(m):
            if arr[i][j] and visited[i][j] == 0:    # 배추가 있고 방문을 안 했으면
                cnt += 1                            # 카운트
                bfs(i, j)
    print(cnt)
```

---

## Comment

- **문제를 잘 읽고 가로, 세로, 행, 열의 좌표 설정에 주의하기**
- **`if` 문의 조건 설정 주의하기!!**

