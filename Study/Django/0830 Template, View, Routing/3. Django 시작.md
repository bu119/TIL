# Django 기본 설정

## 1. 파이썬 가상환경 설정

- shell은 커널과 사용자 중간
- VSCode를 종료했다가 다시 실행할 때는 가상환경을 다시 활성화 해줘야한다.
- 가상환경은 `git`에 안올라가게 `gitignore`을 설정했다.
  -  `git`에서 받으면 가상환경을 다시 만들어줘야한다.



1. **가상환경 생성** 

   ```bash
   $ python -m venv [가상환경이름]
   ```

2. **가상환경 안으로 이동**

   ```bash
   $ soruce [가상환경이름]/
   ```

3. **가상환경 활성화**

   ```bash
   $ source [가상환경이름]/Scripts/activate
   ```
   
   
   
   <img width="727" alt="1  가상환경 설정" src="https://user-images.githubusercontent.com/109335452/189487822-34f19acc-8f67-46ce-bf93-b2de798a8f55.png">



4. **가상환경에 설치된 파이썬 패키지 목록 확인** 

   - 현재 가상환경인지 확인 → 가상환경이면 설치한 파일이 없음

   ```bash
   $ pip list 
   ```

   

   <img width="929" alt="2  설치파일 확인" src="https://user-images.githubusercontent.com/109335452/189487887-0a568379-86db-4586-907a-9c5b4acb9829.png">

---

## 2. Django 설치

1. **장고 설치**

   - Django 4.0 릴리즈로 인해 3.2(LTS) 버전을 명시해서 설치
   - LTS : Long Term Support (장기 지원 버전)
   
   ```bash 
   $ pip install django == 3.2.13
   ```
   
   
   
   <img width="953" alt="3  장고 설치" src="https://user-images.githubusercontent.com/109335452/189488091-9ec8b947-0486-4f5f-ab27-1cc5d994ecfa.png">



2. 가상환경에 설치된 파이썬 패키지 목록 확인

   - 현재 가상환경인지 확인 → 가상환경이면 설치한 파일이 없음

   ```bash
   $ pip list 
   ```

   

   <img width="904" alt="4  장고 설치 확인" src="https://user-images.githubusercontent.com/109335452/189488212-1a105be2-b63a-4a5b-9cd8-1726bb9c92c0.png">



3. 패키지 목록 생성

   - 가상환경에 설치한 목록을 txt파일로 저장 → 나중에 불러 올 수 있다.

   ```bash
   $ pip freeze > requirments.txt
   ```

   

   <img width="875" alt="5  설치 파일 저장" src="https://user-images.githubusercontent.com/109335452/189488752-caa1f062-4846-48c6-b650-c81ad40b5d41.png">

   

4. 저장한 패키지 목록 설치하기

   ```bash
   $pip install -r requirements.txt
   ```

---

## 3. Django Project

1. 프로젝트 생성

   ```bash
   $ django-admin startproject [프로젝트이름] .
   ```

   - `.` : 현재 폴더에 바로 프로젝트를 만들어준다. → 새로운 폴더를 생성하지 않는다.

   

   <img width="842" alt="6  프로젝트 생성" src="https://user-images.githubusercontent.com/109335452/189488755-67486da3-552e-4c66-9106-5b10f2899b5e.png">

   

2. 서버 실행

   ```bash
   $ python manage.py runserver
   ```

   - `Ctrl` 을 누르고 주소를 누른다.
   - `Ctrl + c` : 서버 활성화 중지
   
   
   
   <img width="1029" alt="7  서버실행" src="https://user-images.githubusercontent.com/109335452/189488989-39dc251c-33b2-46e2-9a5b-dd12e3dbcea6.png">
   
   
   
   - 서버 실행 후 메인 페이지 확인
   
   <img width="1280" alt="8  활성화된 서버페이지" src="https://user-images.githubusercontent.com/109335452/189488757-bbb331fa-80db-47b2-8b97-08ec47f4bc05.png">

---

## 4. Project 구조

<img width="823" alt="9  프로젝트 구조" src="https://user-images.githubusercontent.com/109335452/189525711-baacb7a7-00ee-43b6-83ee-5ba3791e5f72.png">

​	

1. `__inti__.py`
   - Python에게 이 디렉토리를 하나의 Python 패키지로 다루도록 지시
   - 별도로 추가 코드를 작성하지 않음
2. `asgi.py`
   - Asynchronous Server Gateway Interface
   - Django 애플리케이션이 비동기식 웹 서버와 연결 및 소통하는 것을 도움
   - 추후 배포 시에 사용하며 지금은 수정하지 않음
3. **`settings.py`**
   - **Django 프로젝트 설정을 관리**
4. **`urls.py`**
   - **사이트의 `url` 과 적절한 `views` 의 연결을 지정**
5. `wsgi.py`
   - Web Server Gateway Interface
   - Django 애플리케이션이 웹서버와 연결 및 소통하는 것을 도움
   - 추후 배포 시에 사용하며 지금은 수정하지 않음
6. **`manage.py`**
   - **Django 프로젝트와 다양한 방법으로 상호작용하는 커맨드라인 유틸리티**

---

## 5. Django Application

1. 애플리케이션(앱) 생성

   - **애플리케이션 이름**은 '**복수형**'으로 작성하는 것을 권장

   ```bash
   $ python manage.py startapp [애플리케이션이름]
   ```

   

   <img width="878" alt="10  앱 생성" src="https://user-images.githubusercontent.com/109335452/189526330-2bbd99dd-59f9-4675-bbfc-4ed6e96ccbc8.png">

   

2. 애플리케이션(앱)  등록

- **프로젝트에서 앱을 사용하기 위해서는** 반드시 **프로젝트** **`settings.py`**의 **INSTALLED_APPS 리스트에 앱 이름을 추가**해야 한다.

  - INSTALLED_APPS : Django installation에 활성화 된 모든 앱을 지정하는 문자열 목록

  

  <img width="947" alt="12  앱 등록" src="https://user-images.githubusercontent.com/109335452/189526940-014b2ecf-8cfa-4426-8778-6d3959abcbaf.png">



- **반드시 앱 생성 후 INSTALLED_APPS에 등록!!!** ★★★

---

## 6. Application 구조

<img width="961" alt="11  앱 구조" src="https://user-images.githubusercontent.com/109335452/189526432-5c4b8076-ed71-40bc-a643-9e2f1a475922.png">



1. **`admin.py`**
   - **관리자용 페이지를 설정하는 곳**
2. `apps.py`
   - 앱의 정보가 작성된 곳
   - 별도로 추가 코드를 작성하지 않음
3. **`models.py`**
   - **애플리케이션에서 사용하는 Model을 정의하는 곳**
   - **MTV 패턴의 M에 해당**
4. `tests.py`
   - 프로젝트의 테스트 코드를 작성하는 곳
5. **`views.py`**
   - **view 함수들이 정의 되는 곳**
   - **MTV 패턴의 V에 해당**

---

## 7. Project & Application

- Project
  - 'collection of apps'
  - **프로젝트는 앱의 집합**
  - 프로젝트에는 여러 앱이 포함될 수 있음
  - 앱은 여러 프로젝트에 있을 수 있음
- Application
  - 앱은 **실제 요청을 처리**하고 **페이지를 보여주는** 등의 역할을 담당
  - 일반적으로 앱은 **하나의 역할 및 기능 단위로 작성하는 것을 권장**함

---

# 요청과 응답

- Django에서의 **코드 작성은 URL → VIEW → TEMPLATE 순으로** 작성한다.

- **"데이터의 흐름 순서"**

  

<img width="689" alt="13  데이터의 흐름순서" src="https://user-images.githubusercontent.com/109335452/189527782-4020b613-ed5a-4f6a-87ae-d6dc738b3bf6.png">



### 1. Urls

```python
from django.contrib import admin
from django.urls import path
from articles import views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('index/', views.index),
]
```

- URL → VIEW → TEMPLATE 의 기초 과정을 작성해보고 데이터의 흐름을 이해하기

### 2. View

```python
def index(request):
    return render(request, 'index.html')
```



- HTTP 요청을 수신하고 HTTP 응답을 반환하는 함수 작성
- Template에게 HTTP 응답 서식을 맡김

### 3. render()

- 주어진 템플릿을 주어진 컨텍스트 데이터와 결합하고 
- 렌더링 된 텍스트와 함께 HttpResponse(응답) 객체를 반환하는 함수



```python
render( request, template_name, context )
```

1. request
   - 응답을 생성하는 데 사용되는 요청 객체
2. template_name
   - 템플릿의 전체 이름 또는 템플릿 이름의 경로
3. context
   - 템플릿에서 사용할 데이터
   - 딕셔너리 타입으로 작성

### 4. Templates

- **템플릿 폴더 이름은 반드시 templates** 라고 지정해야 한다.
- 실제 내용을 보여주는데 사용되는 파일
- 파일의 구조나 레이아웃을 정의
- Template 파일의 기본 경로
  - app 폴더 안의 templates 폴더
  - app_name/templates/
- templates 폴더 안에 html 파일을 작성한다.
